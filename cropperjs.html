<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cropper.js 效果</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">

    <style>
        .image-container {
            margin-bottom: 30px;
        }

        #image {
            max-width: 100%;
            display: block;
        }

        #result {
            margin-top: 20px;
        }

        #resultImage {
            border-radius: 50%;
            width: 500px;
            /* 增加結果圖片尺寸 */
            height: 500px;
            /* 增加結果圖片尺寸 */
            display: none;
            object-fit: cover;
            /* 確保圖片正確填充圓形區域 */
        }

        .cropper-view-box,
        .cropper-face {
            border-radius: 50%;
        }

        .cropper-line {
            background-color: transparent;
        }

        .cropper-point {
            width: 8px;
            height: 8px;
            background-color: #39f;
            border-radius: 50%;
        }
    </style>
</head>

<body>
    <div class="navbar-container"></div>

    <div class="max-w-7xl mx-auto px-4 mt-8 mb-20">
        <h1 class="text-3xl font-bold mb-6">cropper.js 效果</h1>
        <a href="https://fengyuanchen.github.io/cropperjs/" class="text-blue-600 hover:text-blue-800 underline"
            target="_blank">cropper.js 官網</a>

        <h2 class="text-2xl font-semibold mt-8 mb-4">範例程式碼</h2>

        <div class="mb-4">
            <div class="bg-gray-800 text-white text-sm py-2 px-4 rounded-t-lg">
                引入CDN
            </div>
            <pre class="bg-gray-100 p-4 rounded-b-lg overflow-x-auto"><code class="language-html">&lt;!-- 引入必要的腳本 --&gt;
&lt;link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css"&gt;
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"&gt;&lt;/script&gt;</code></pre>
        </div>

        <div class="mb-4">
            <div class="bg-gray-800 text-white text-sm py-2 px-4 rounded-t-lg">樣式語法</div>
            <pre class="bg-gray-100 p-4 rounded-b-lg overflow-x-auto"><code class="language-javascript">window.addEventListener('DOMContentLoaded', function () {
const image = document.getElementById('image');
const resultImage = document.getElementById('resultImage');
let cropper;

cropper = new Cropper(image, {
    aspectRatio: 1,
    viewMode: 1,
    guides: false,
    center: true,
    cropBoxResizable: true,
    dragMode: 'move',
    ready: function () {
        const containerData = cropper.getContainerData();
        const minSize = Math.min(containerData.width, containerData.height);
        const size = minSize * 0.6;

        cropper.setCropBoxData({
            width: size,
            height: size,
            left: (containerData.width - size) / 2,
            top: (containerData.height - size) / 2
        });
    }
});

document.querySelector('.crop-btn').addEventListener('click', function () {
    const canvas = cropper.getCroppedCanvas({
        width: 500, // 增加畫布尺寸以獲得更高品質的結果
        height: 500
    });

    resultImage.src = canvas.toDataURL();
    resultImage.style.display = 'block';
});</div>

        <h2 class="text-2xl font-semibold mt-8 mb-4">效果展示</h2>
        <div class="bg-gray-100 p-8 rounded-lg mb-20 space-y-8">
            <h1 class="text-3xl font-bold text-gray-800 mb-6">Crop a round image</h1>

            <h2 class="text-xl font-semibold text-gray-700 mb-4">Image</h2>
            <div class="image-container bg-white rounded-lg shadow-md">
                <img id="image" 
                    src="https://fengyuanchen.github.io/cropperjs/images/picture.jpg" 
                    alt="Source Image"
                    class="w-full h-auto rounded-lg object-contain">
            </div>

            <h2 class="text-xl font-semibold text-gray-700 mb-4">Result</h2>
            <div id="result" class="space-y-4">
                <button class="crop-btn bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-6 rounded-lg transition duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50">
                    Crop
                </button>
                <div class="bg-white rounded-lg shadow-md">
                    <img id="resultImage" 
                        src="" 
                        alt="Cropped Result"
                        class="w-full h-auto rounded-lg object-contain">
                </div>
            </div>
        </div>
    </div>

    <script src="navbar.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>

    <script>
        hljs.highlightAll();

        window.addEventListener('DOMContentLoaded', function () {
            const image = document.getElementById('image');
            const resultImage = document.getElementById('resultImage');
            let cropper;

            cropper = new Cropper(image, {
                aspectRatio: 1,
                viewMode: 1,
                guides: false,
                center: true,
                cropBoxResizable: true,
                dragMode: 'move',
                ready: function () {
                    const containerData = cropper.getContainerData();
                    const minSize = Math.min(containerData.width, containerData.height);
                    const size = minSize * 0.6;

                    cropper.setCropBoxData({
                        width: size,
                        height: size,
                        left: (containerData.width - size) / 2,
                        top: (containerData.height - size) / 2
                    });
                }
            });

            document.querySelector('.crop-btn').addEventListener('click', function () {
                const canvas = cropper.getCroppedCanvas({
                    width: 500, // 增加畫布尺寸以獲得更高品質的結果
                    height: 500
                });

                resultImage.src = canvas.toDataURL();
                resultImage.style.display = 'block';
            });
        });
    </script>
</body>